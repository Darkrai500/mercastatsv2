# =========================================================================
# MERCASTATS - Configuración de Entorno (TEMPLATE)
# =========================================================================
# Copia este archivo a .env y ajusta los valores según tu entorno local
# ⚠️ NUNCA versionar el archivo .env (contiene secretos)

# -------------------------------------------------------------------------
# DATABASE - PostgreSQL
# -------------------------------------------------------------------------
DATABASE_URL=postgres://mercastats_app:tu_password_aqui@localhost:5432/mercastats

# Pool de conexiones (opcional - valores por defecto)
DATABASE_MAX_CONNECTIONS=10
DATABASE_MIN_CONNECTIONS=2
DATABASE_CONNECT_TIMEOUT=30
DATABASE_IDLE_TIMEOUT=600

# -------------------------------------------------------------------------
# BACKEND - Servidor Rust
# -------------------------------------------------------------------------
BACKEND_HOST=127.0.0.1
BACKEND_PORT=8000

# Número de workers (threads) - Por defecto usa el número de CPUs
SERVER_WORKERS=4

# -------------------------------------------------------------------------
# SECURITY - Autenticación
# -------------------------------------------------------------------------
# Genera un secreto seguro con: openssl rand -base64 32
JWT_SECRET=change_me_to_a_random_32_byte_string_in_production
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=30

# -------------------------------------------------------------------------
# CORS - Configuración de dominios permitidos
# -------------------------------------------------------------------------
# En desarrollo permite localhost, en producción especifica dominios exactos
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# -------------------------------------------------------------------------
# LOGGING - Niveles de log
# -------------------------------------------------------------------------
# Niveles: trace, debug, info, warn, error
RUST_LOG=info,mercastats_backend=debug,sqlx=warn

# -------------------------------------------------------------------------
# FILE UPLOAD - Límites de archivos
# -------------------------------------------------------------------------
MAX_FILE_SIZE_MB=10
UPLOAD_DIR=./uploads
ALLOWED_EXTENSIONS=pdf,jpg,jpeg,png

# -------------------------------------------------------------------------
# WORKERS - Servicios Python (para el futuro)
# -------------------------------------------------------------------------
OCR_SERVICE_URL=http://localhost:5000
ML_SERVICE_URL=http://localhost:5001

# Timeouts para servicios externos (segundos)
OCR_TIMEOUT=30
ML_TIMEOUT=60
MAX_RETRIES=3

# -------------------------------------------------------------------------
# FEATURE FLAGS - Activar/desactivar funcionalidades
# -------------------------------------------------------------------------
ENABLE_OCR=false
ENABLE_ML_PREDICTIONS=false
ENABLE_METRICS=true
ENABLE_API_DOCS=true

# -------------------------------------------------------------------------
# RATE LIMITING
# -------------------------------------------------------------------------
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# -------------------------------------------------------------------------
# CACHE
# -------------------------------------------------------------------------
CACHE_TTL_SECONDS=300
ENABLE_CACHE=true

# -------------------------------------------------------------------------
# DEVELOPMENT - Configuración de desarrollo
# -------------------------------------------------------------------------
ENVIRONMENT=development
SQLX_LOGGING=true

# -------------------------------------------------------------------------
# INTELLIGENCE SERVICE (Python OCR/ML)
# -------------------------------------------------------------------------
INTELLIGENCE_SERVICE_URL=http://127.0.0.1:9000
# Opcional: clave compartida para llamadas backend -> servicio externo
INTELLIGENCE_API_KEY=
INTELLIGENCE_TIMEOUT_SECS=30
INTELLIGENCE_MAX_RETRIES=2
